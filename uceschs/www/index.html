<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Stylish Portfolio - Start Bootstrap Template</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/stylish-portfolio.min.css" rel="stylesheet">

    <!-- TEST -->
    <title>Test HTML Location Functionality</title>
    <script>
      function getLocation() {
        alert('getting location');
        navigator.geolocation.getCurrentPosition(getPosition);
      }
      function getPosition(position) {
        document.getElementById('showLocation').innerHTML = "Latitude: " + position.coords.latitude +
        "<br>Longitude: " + position.coords.longitude;
      }</script>

      <!-- the following links add the CSS and Javascript required for the Leaflet Map -->
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
      integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
      integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="crossorigin=""></script>
      <!-- the following CSS is used to set the size of the Map -->
      <style type="text/css"> #mapid { height: 500px; width: 700px; }</style>
      <!-- the following links incorporate the CSS required for custom icon creation -->
      <link rel="stylesheet" href="ionicons.min.css">
      <link rel="stylesheet" href="leaflet.awesome-markers.css">
      <script src="leaflet.awesome-markers.js"></script>


  </head>

  <body id="page-top">
    <!-- Navigation -->
    <a class="menu-toggle rounded" href="#">
      <i class="fa fa-bars"></i>
    </a>
    <nav id="sidebar-wrapper">
      <ul class="sidebar-nav">
        <li class="sidebar-brand">
          <a class="js-scroll-trigger" href="#page-top">Start Bootstrap</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="#page-top">Home</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="#about">About</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="#services">Services</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="#portfolio">Portfolio</a>
        </li>
        <li class="sidebar-nav-item">
          <a class="js-scroll-trigger" href="#contact">Contact</a>
        </li>
      </ul>
    </nav>

    <!-- Header -->
    <header class="masthead d-flex">
      <div class="container text-center my-auto">
        <h1 class="mb-1">Qiz APP</h1>
        <h3 class="mb-5">
          <em>A Free Bootstrap Theme by Start Bootstrap</em>
        </h3>
        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">Track your location</a>
      </div>
      <div class="overlay"></div>
    </header>

    <!-- About -->
    <section class="content-section bg-light" id="about">
      <div class="container text-center">
        <div class="row">
          <div class="col-lg-10 mx-auto">
            <h2>This code will display your current location!</h2>
            <p class="lead mb-5">This theme features a flexible, UX friendly sidebar menu and stock photos from our friends at
              <a href="https://unsplash.com/">Unsplash</a>!</p>
            <div id='showLocation'><h3 class="text-secondary mb-0">Location will be displayed here!</h3></div>
            <a class="btn btn-dark btn-xl js-scroll-trigger" href="" onclick="getLocation();return false;">Click Me to Get Your Location</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Services -->
    <section class="content-section bg-primary text-white text-center" id="services">
      <div class="container">
        <div class="content-section-heading">
          <h3 class="text-secondary mb-0">Services</h3>
          <h2 class="mb-5">What We Offer</h2>
        </div>
        <div class="row">
          <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
            <span class="service-icon rounded-circle mx-auto mb-3">
              <i class="icon-screen-smartphone"></i>
            </span>
            <h4>
              <strong>Responsive</strong>
            </h4>
            <p class="text-faded mb-0">Looks great on any screen size!</p>
          </div>
          <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
            <span class="service-icon rounded-circle mx-auto mb-3">
              <i class="icon-pencil"></i>
            </span>
            <h4>
              <strong>Redesigned</strong>
            </h4>
            <p class="text-faded mb-0">Freshly redesigned for Bootstrap 4.</p>
          </div>
          <div class="col-lg-3 col-md-6 mb-5 mb-md-0">
            <span class="service-icon rounded-circle mx-auto mb-3">
              <i class="icon-like"></i>
            </span>
            <h4>
              <strong>Favorited</strong>
            </h4>
            <p class="text-faded mb-0">Millions of users
              <i class="fa fa-heart"></i>
              Start Bootstrap!</p>
          </div>
          <div class="col-lg-3 col-md-6">
            <span class="service-icon rounded-circle mx-auto mb-3">
              <i class="icon-mustache"></i>
            </span>
            <h4>
              <strong>Question</strong>
            </h4>
            <p class="text-faded mb-0">I mustache you a question...</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Callout -->
    <section class="callout">
      <div class="container text-center">
        <h2 class="mx-auto mb-5">Welcome to
          <em>your</em>
          next website!</h2>
        <a class="btn btn-primary btn-xl" href="#mapid">Get to map one!</a>
      </div>
    </section>

    <!-- Portfolio -->
    <section class="content-section" id="portfolio">
      <div class="container">
        <div class="content-section-heading text-center">
          <h3 class="text-secondary mb-0">Portfolio</h3>
          <h2 class="mb-5">Recent Projects</h2>
        </div>
        <div class="row no-gutters">
          <div class="col-lg-6">
            <a class="portfolio-item" href="#mapid2">
              <span class="caption">
                <span class="caption-content">
                  <h2>Stationary</h2>
                  <p class="mb-0">GO TO MAP 2!</p>
                </span>
              </span>
              <img class="img-fluid" src="img/portfolio-1.jpg" alt="">
            </a>
          </div>
          <div class="col-lg-6">
            <a class="portfolio-item" href="#">
              <span class="caption">
                <span class="caption-content">
                  <h2>Ice Cream</h2>
                  <p class="mb-0">A dark blue background with a colored pencil, a clip, and a tiny ice cream cone!</p>
                </span>
              </span>
              <img class="img-fluid" src="img/portfolio-2.jpg" alt="">
            </a>
          </div>
          <div class="col-lg-6">
            <a class="portfolio-item" href="#">
              <span class="caption">
                <span class="caption-content">
                  <h2>Strawberries</h2>
                  <p class="mb-0">Strawberries are such a tasty snack, especially with a little sugar on top!</p>
                </span>
              </span>
              <img class="img-fluid" src="img/portfolio-3.jpg" alt="">
            </a>
          </div>
          <div class="col-lg-6">
            <a class="portfolio-item" href="#">
              <span class="caption">
                <span class="caption-content">
                  <h2>Workspace</h2>
                  <p class="mb-0">A yellow workspace with some scissors, pencils, and other objects.</p>
                </span>
              </span>
              <img class="img-fluid" src="img/portfolio-4.jpg" alt="">
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Call to Action -->
    <section class="content-section bg-primary text-white">
      <div class="container text-center">
        <h2 class="mb-4">The buttons below are impossible to resist...</h2>
        <a href="#" class="btn btn-xl btn-light mr-4">Click Me!</a>
        <a href="#" class="btn btn-xl btn-dark">Look at Me!</a>
      </div>
    </section>

    <!-- Map -->
    <section id="contact" class="map">
      <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;aq=0&amp;oq=twitter&amp;sll=28.659344,-81.187888&amp;sspn=0.128789,0.264187&amp;ie=UTF8&amp;hq=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;t=m&amp;z=15&amp;iwloc=A&amp;output=embed"></iframe>
      <br/>
      <small>
        <a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;aq=0&amp;oq=twitter&amp;sll=28.659344,-81.187888&amp;sspn=0.128789,0.264187&amp;ie=UTF8&amp;hq=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;t=m&amp;z=15&amp;iwloc=A"></a>
      </small>
    </section>


    <!-- Map2 -->
    <section class="callout">
      <!-- the mapid div will hold the map -->
      <div class="container vertical-center" id="mapid" style="width: 100%; height: 500px;"></div>
      <!-- the following script will load the map and set the default view and zoom, as well as loading the basemap tiles -->
      <button id="loadData" name="loadData" onclick="loadEarthquakeData()">Click here to load the Schotland data </button>
      <button id="removeEarthquakeData" name="removeEarthquakeData"
      onclick="removeEarthquakeData()">Click here to remove the Schotland data </button>
      <button id="loadData" name="loadData" onclick="loadBusStopData()">Click here to load the Bus Stops data </button>
      <button id="removeBusStopData" name="removeBusStopData"
      onclick="removeBusStopData()">Click here to remove the Bus Stops data </button>
      <script>
      // load the map
      var mymap = L.map('mapid');
      function onLocationFound(e) {
    var radius = e.accuracy / 2;

    L.marker(e.latlng).addTo(map)
        .bindPopup("You are within " + radius + " meters from this point").openPopup();

    L.circle(e.latlng, radius).addTo(map);
}
function onLocationError(e) {
    alert(e.message);
}
mymap.on('locationfound', onLocationFound);
mymap.on('locationerror', onLocationError);

      mymap.locate({setView: true, maxZoom: 16});
      // load the tiles
      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {maxZoom: 18,attribution: 'Map data &copy; <ahref="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>,' +'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',id: 'mapbox.streets'}).addTo(mymap);
      // create a variable for each of the layers we want to load/remove
      var earthquakelayer;
      var busstoplayer;
      // create a variable that will hold the XMLHttpRequest() - this must be done outside a function so that all the functions can use the same variable
      var client;
      var testMarkerRed = L.AwesomeMarkers.icon({icon: 'play',markerColor: 'red'});
      var testMarkerPink = L.AwesomeMarkers.icon({icon: 'play',markerColor: 'pink'});

      function loadEarthquakeData() {
      // call the getEarthquakes code
      // keep the alert message so that we know something is happening
      alert("Loading Earthquakes");
      getData("earthquakes");
      }
      function loadBusStopData() {
      // call the getEarthquakes code
      // keep the alert message so that we know something is happening
      alert("Loading Bus Stops");
      getData("busstops");
      }
      // create the code to get the data using an XMLHttpRequest
      function getData(layername) {
        client = new XMLHttpRequest();
        // depending on the layername we get different URLs
        var url;
        if (layername =="earthquakes") {
          url = "http://developer.cege.ucl.ac.uk:30296/getPOI"
        }
        if (layername == "busstops") {
          url = "busstops.geojson"
          alert("url"+url);
        }
        client.open('GET',url);
        client.onreadystatechange = dataResponse;
        client.send();
        }
        // create the code to wait for the response from the data server, and process the response once it is received
        function dataResponse() {
        // this function listens out for the server to say that the data is ready - i.e. has state 4
        if (client.readyState == 4) {
        // once the data is ready, process the data
        var geoJSONData = client.responseText;
        loadLayer(geoJSONData);
        alert("dataResponse");
        }
        }
        // convert the received data - which is text - to JSON format and add it to the map
        function loadLayer(geoJSONData) {
        // which layer did we actually load?
        alert("loaderlayerstart");
        if (geoJSONData.indexOf("question") > 0) {
          var loadingEarthquakes = true;
        }
        if (geoJSONData.indexOf("IIT_METHOD") > 0) {
          var loadingBusstops = true;
        }
        // convert the text to JSON
        var json = JSON.parse(geoJSONData);

        // add the JSON layer onto the map - it will appear using the default icons
        if (loadingEarthquakes === true){
          earthquakelayer = L.geoJson(json,{
            pointToLayer : function(feature,latlng){
              if (feature.properties.answer_true != 'answer1') {
                  return L.marker(latlng, {icon:testMarkerPink}).bindPopup("<b>"+feature.properties.question+"</b>").openPopup();
            }
          }
          }).addTo(mymap);
          mymap.fitBounds(earthquakelayer.getBounds());
        }

        if (loadingBusstops === true){
          alert("loading the location");
          busstoplayer = L.geoJson(json).addTo(mymap).bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();
          mymap.fitBounds(busstoplayer.getBounds());
        }
        }

        function removeEarthquakeData() {
          alert("Earthquake data will be removed");
          mymap.removeLayer( earthquakelayer );
        }
        function removeBusStopData() {
          alert("Bus stops data will be removed");
          mymap.removeLayer( busstoplayer );
        }


        var popup = L.popup();
        function onMapClick(e) {
          popup
          .setLatLng(e.latlng)
          .setContent("You clicked the map at " + e.latlng.toString())
          .openOn(mymap);
        }
    mymap.on('click', onMapClick);
    </script>
  </section>




    <!-- Footer -->
    <footer class="footer text-center">
      <div class="container">
        <ul class="list-inline mb-5">
          <li class="list-inline-item">
            <a class="social-link rounded-circle text-white mr-3" href="#">
              <i class="icon-social-facebook"></i>
            </a>
          </li>
          <li class="list-inline-item">
            <a class="social-link rounded-circle text-white mr-3" href="#">
              <i class="icon-social-twitter"></i>
            </a>
          </li>
          <li class="list-inline-item">
            <a class="social-link rounded-circle text-white" href="#">
              <i class="icon-social-github"></i>
            </a>
          </li>
        </ul>
        <p class="text-muted small mb-0">Copyright &copy; Your Website 2017</p>
      </div>
    </footer>

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
      <i class="fa fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/stylish-portfolio.min.js"></script>
    <script src="leaflet.awesome-markers.js"></script>

  </body>

</html>
